{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Cushny and Peeble’s Data\"\nauthor: \"coop711\"\ndate: \"2015년 3월 26일\"\noutput: html_document\n---\n\n### Data Management\n\n- R-base에서 제공하고 있는 sleep data 는 long form data frame 으로 주어져 있음.\n\n```{r}\nsleep\nstr(sleep)\n```\n\n- long form을  wide form으로 변환하고, 각각의 경우에 적절한 t-test를 시도해 볼 것임. 먼저 wide form 으로 변환하는 작업은 결국 data frame을 새로 구성하는 것일 뿐이므로 다음으로 완료됨.\n\n``` {r}\nsleep.wide<-data.frame(A=sleep[sleep$group==1, 1], B=sleep[sleep$group==2, 1])\nsleep.wide\n```\n\nOne Sample T test\n------------------\n\n- long form 에서 각 수면제의 효과가 없다는 가설을 t-test 하려면 \n\n```{r}\nt.test(sleep$extra[sleep$group==1], alternative=\"greater\")\nt.test(sleep$extra[sleep$group==2], alternative=\"greater\")\n```\n\n- 둘을 단번에 수행하려면 tapply()를 이용하여\n\n```{r}\ntapply(sleep$extra, sleep$group, t.test, alternative=\"greater\")\n```\n\n- 두 수면제 간의 효과에 차이가 없다는 가설을 검증하려면, paired 임을 유념하여야 함.\n\n```{r}\nt.test(sleep$extra[sleep$group==1], sleep$extra[sleep$group==2], paired=T)\n```\n\n- formula 형식을 빌리면 다음과 같이 비교적 간결하게 기술할 수 있음.\n\n```{r}\nt.test(extra~group, data=sleep, paired=T)\n```\n\n- 두 수면제의 효과를 boxplot을 그려 비교하면(산점도를 그려 비교하려면 어떻게?)\n\n```{r}\nplot(extra~group, data=sleep, main=\"Using Long Form\")\n```\n\n- wide form 으로 같은 작업을 수행하면\n\n```{r}\n\nattach(sleep.wide)\nt.test(A, alternative=\"greater\")\nt.test(B, alternative=\"greater\")\n```\n\n- apply() 를 이용해서 한번에 수행하면\n\n```{r}\napply(sleep.wide, 2, t.test, alternative=\"greater\")\n```\n\n- 두 수면제 간의 효과 차이를 검증하려면\n\n```{r}\nt.test(A, B, paired=T)\n```\n\n- 각각의 효과를 산점도를 그려 비교하면\n\n```{r, scatter diagram, fig.width = 5, fig.height = 5}\nplot(A, B, main=\"Using Wide Form\", xlim=c(-2,6), ylim=c(-2,6))\nabline(a=0, b=1, col=\"red\")\ntext(x=4, y=3, labels=\"y=x\")\ncor(A, B)\n```\n\n- 정규성에 대한 검증은 각자 수행해 볼 것.\n\n```{r}\n# install.packages(\"nortest\", repos = \"https://cran.rstudio.com\")\nlibrary(nortest)\napply(sleep.wide, 2, ad.test)\n```\n\n### Dot plot Comparison\n\n```{r, dotplots}\nlibrary(ggplot2)\nlibrary(grid)\ng1 <- ggplot(data.frame(A, B)) + theme_bw()\n# g2 <- g1 + geom_segment(aes(x = B, y = reorder(1:10, A), xend = A, yend = reorder(1:10, A)), arrow = arrow(length = unit(0.08, \"inches\"), ends = \"first\", type = \"open\"), linetype = 1)\n# g3 <- g2 + xlab(\"Sleeping Pills A and B\") + ylab(\"Hours Sleep\")\ng2 <- g1 + geom_point(aes(x = A, y = 1:10), shape = \"A\", size = 3)\ng3 <- g2 + geom_point(aes(x = B, y = 1:10), shape = \"B\", size = 3)\ng4 <- g3 + geom_segment(aes(x = ifelse(A >=0, 0, B), y = 1:10, xend = ifelse(A >= 0, B, A), yend = 1:10))\ng5 <- g4 + geom_vline(xintercept = 0, linetype = 3)\ng6 <- g5 + scale_y_continuous(name = \"Patient ID\", breaks = 1:10, labels = 1:10)\ng7 <- g6 + scale_x_continuous(name = \"Sleeping Pills A and B\")\ng7\n```\n\n- 작업 디렉토리 정리\n\n```{r}\nsave(file=\"sleep.rda\", \"sleep.wide\")\ndetach()\n```\n",
    "created" : 1457717240145.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2363981229",
    "id" : "18BD2628",
    "lastKnownWriteTime" : 1457719964,
    "last_content_update" : 1457719964643,
    "path" : "~/Google 드라이브/Works/Class/Stat_Graphics/R.WD/Student_Gosset/R/sleep160311.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}